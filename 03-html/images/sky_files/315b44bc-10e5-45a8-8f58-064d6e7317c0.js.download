(()=>{let e;function o(e,o,r,t){Object.defineProperty(e,o,{get:r,set:t,enumerable:!0,configurable:!0})}var r,t,i,n,a,d,_,l,s={};o(s,"Template",()=>d),o(s,"ErrorCode",()=>_),o(s,"errorDict",()=>G),o(s,"deepCopy",()=>W),o(s,"triggerPmac",()=>ef),o(s,"initPubxGlobals",()=>eN),o(s,"arePubxFloorsSkipped",()=>eb),o(s,"arePubxFloorsSet",()=>em),o(s,"getFloorMvValue",()=>eR),o(s,"getPubxOptimizedValue",()=>eU),o(s,"getPubxSplitValue",()=>eA),o(s,"setSplitKeyGlobal",()=>eF),o(s,"setFloorsAndMvInGlobal",()=>eT);let u="PubxFloorProvider";(r=a||(a={})).WIN="WIN",r.FLOORED="FLOORED",r.NOBIDS="NOBIDS";let p=e=>({provider:"pubxai",options:{samplingRate:e.samplingRate,pubxId:e.pubxId}}),O=(e,o,r)=>{e&&o.pbNamespace.que.push(function(){let{debug:e,error:t,remotePageError:i}=window.__pubx__.logger;if(!o.pbNamespace.installedModules.includes("priceFloors")){t("priceFloors module is not installed"),i({code:s.ErrorCode.PRICE_FLOORS_NOT_FOUND});return}let n=o.pbNamespace.getConfig("floors");n&&n.data&&n.data.floorProvider!==u&&(t("Non-pubx floor provider present",n),i({code:s.ErrorCode.NON_PUBX_FLOORS_FOUND,payload:{existingFloors:n}}));let a=r(o);window.__pubxFloorsConfig__=a,o.pbNamespace.setConfig(a),e("Setting Floors Config",(0,s.deepCopy)(a))})},c=(e,o)=>{let r=void 0!==e.adserverTargeting&&void 0!==e.adserverTargeting[o]&&!isNaN(e.adserverTargeting[o])&&parseFloat(e.adserverTargeting[o])>0;return r},f=(e,o)=>e.filter(e=>e.adUnitCode===o),N=(e,o)=>e.filter(e=>e.adUnitCode===o),g=(e,o)=>e.flatMap(e=>e.bids).filter(e=>e.adUnitCode===o),b=(e,o,r)=>0===e.length&&0===o.length?a.NOBIDS:e.some(e=>c(e,r))?a.WIN:a.FLOORED,m=(e,o,r,t,i,n)=>o===r?e:"number"!=typeof e||"string"!=typeof o||"string"!=typeof r?(n({code:s.ErrorCode.CURRENCY_INVALID_INPUT,adUnitCode:i,payload:{value:e,fromCurrency:o,toCurrency:r}}),window.__pubx__.logger.error("Invalid input types for currency conversion",{value:e,fromCurrency:o,toCurrency:r},"Skipping conversion."),e):void 0===t.pbNamespace.convertCurrency?(n({code:s.ErrorCode.CURRENCY_MODULE_NOT_INSTALLED,adUnitCode:i,payload:{value:e,fromCurrency:o,toCurrency:r}}),window.__pubx__.logger.error("Currency module is not configured in prebid.js. Skipping conversion."),e):t.pbNamespace.convertCurrency(e,o,r),E=(e,o)=>[...e,...o],R=e=>{if(void 0!==e)return{floorValue:e.floorValue,floorRule:e.floorRule,floorCurrency:e.floorCurrency}},U=(e,o,r,t,i,n,d)=>{let _,l,u,p,O,f;let{remoteAucError:N,remoteAucEvent:g}=d,{hbPbKey:b}=n;switch(i){case a.WIN:let U=o.filter(e=>c(e,b)).sort((e,o)=>parseFloat(o.adserverTargeting[b])-parseFloat(e.adserverTargeting[b]))[0];_=parseFloat(U.adserverTargeting[b]),l=U.currency,u=U.floorData,p=U.adserverTargeting;break;case a.FLOORED:let A=E(r,o),I=A.sort((o,r)=>m(r.originalCpm,r.originalCurrency,n.currency,n,e.code,N)-m(o.originalCpm,o.originalCurrency,n.currency,n,e.code,N))[0];_=I.originalCpm,l=I.originalCurrency,u=I.floorData,p=I.adserverTargeting;break;case a.NOBIDS:if(l=n.currency,(0,s.arePubxFloorsSkipped)(e)){_=.01;break}void 0!==e.sizes?O=e.sizes:(N({code:s.ErrorCode.ADUNIT_SIZES_NOT_FOUND,adUnitCode:e.code}),window.__pubx__.logger.error("sizes in adUnit is undefined",e),O=["*"]);let F=t.flatMap(o=>O.map(r=>{if("function"==typeof o.getFloor){let t=o.getFloor({size:r,mediaType:"banner"});if(void 0!==t&&void 0!==t.floor)return t.floor;window.__pubx__.logger.error("calc nbids - bidderRequests.bid.getFloor().floor is undefined",e.code)}else window.__pubx__.logger.error("calc nbids - bidderRequests.bid.getFloor doesn't exist",e.code)})).filter(e=>void 0!==e);0!==F.length?f=F.reduce((e,o)=>e+o,0)/F.length:(0===t.length||(N({code:s.ErrorCode.GET_FLOOR_NOT_FOUND,adUnitCode:e.code}),window.__pubx__.logger.error("calc nbids - None of bidderRequests.bids.getFloor() is defined",e.code)),void 0!==n.defaultValues["*|banner"]?f=n.defaultValues["*|banner"]:(N({code:s.ErrorCode.TAG_DEFAULT_VALUES_NOT_FOUND,adUnitCode:e.code}),window.__pubx__.logger.error("defaultValues of *|banner in config is undefined",e.code),f=.01)),_=f}return g({type:"pbBid",data:{adUnitCode:e.code,status:i,bidCurrency:l,bidValue:parseFloat(_.toFixed(4)),pubCurrency:n.currency,floorData:R(u),adserverTargeting:p}}),i===a.FLOORED&&(_=m(_,l,n.currency,n,e.code,N)),parseFloat(_.toFixed(4))},A=e=>{let o=e.flatMap(e=>e.bids.map(({floorData:e})=>{if(e&&e.floorProvider===u&&e.modelVersion)return e.modelVersion})).filter(e=>void 0!==e)[0];return o},I=e=>{let o=e.includes("_AB_")?e.split("_AB_")[1].split("_")[0]:void 0;return o},F=(e,o,r)=>{switch(r){case a.WIN:return e.includes("_dwt_")?parseFloat(e.split("_dwt_")[1].split("_")[0]):o.winBidMultiplier;case a.FLOORED:return e.includes("_dt_")?parseFloat(e.split("_dt_")[1].split("_")[0]):o.flooredBidMultiplier;case a.NOBIDS:return e.includes("_dnt_")?parseFloat(e.split("_dnt_")[1].split("_")[0]):o.noBidMultiplier}},T=(e,o,r)=>{let{error:t}=window.__pubx__.logger;if(e.includes("_fm_"))return parseFloat(e.split("_fm_")[1].split("_")[0]);if(r({code:s.ErrorCode.PMAC_FLOOR_MULTIPLIER_NOT_FOUND,payload:{modelVersion:e}}),t(s.errorDict[s.ErrorCode.PMAC_FLOOR_MULTIPLIER_NOT_FOUND].message,{modelVersion:e}),!o.pmacFloorMultiplier)throw r({code:s.ErrorCode.PMAC_FLOOR_MULTIPLIER_NOT_FOUND_CONFIG}),t(s.errorDict[s.ErrorCode.PMAC_FLOOR_MULTIPLIER_NOT_FOUND_CONFIG].message,{modelVersion:e}),Error("pmacFloorMultiplier is not set in config");return o.pmacFloorMultiplier},C=(e,o,r)=>{let t=void 0!==e.mediaTypes.banner,i=e.bids.some(e=>!!e.bidder),n=(0,s.arePubxFloorsSet)(e);if(!o&&n)throw r({code:s.ErrorCode.PUBX_OFF_FLOORS_FOUND,adUnitCode:e.code}),Error("pubxLoaded is false but has floorData for adUnitCode "+e.code);return t&&i&&(!o&&!n||o&&n)},y=e=>e?e.filter(e=>!!e.originalCpm):[],w=(e,o,r,t,i)=>{let{remoteAucError:n}=i;return o.adUnits.filter(o=>C(o,e,n)&&(0,s.arePubxFloorsSet)(o)).map(e=>{let a=f(o.bidsReceived,e.code),d=N(y(o.bidsRejected),e.code),_=g(o.bidderRequests,e.code),l=b(a,d,t.hbPbKey);if(void 0===r)throw n({code:s.ErrorCode.MODEL_VERSION_NOT_FOUND_READ,adUnitCode:e.code}),Error("floorModelVersion is undefined but adUnit.bids is not");let u=U(e,a,d,_,l,t,i);try{(0,s.triggerPmac)(o.auctionId,e.code,u,l,t,T(r,t,n),i)}catch(e){window.__pubx__.logger.error("Error in Pmac",e)}e.code;let p=parseFloat((u*F(r,t,l)).toFixed(4));return(0,s.arePubxFloorsSkipped)(e)?void 0:{adUnitCode:e.code,floorValue:p,status:l}}).filter(e=>void 0!==e)},v=(e,o)=>{let r=googletag.pubads().getSlots(),t=[];return e.forEach(e=>{let i=r.find(o=>o.getAdUnitPath()===e||o.getSlotElementId()===e);void 0===i?(window.__pubx__.logger.error("GPT Slot not found for adUnitCode",e),o({code:s.ErrorCode.GPT_SLOT_NOT_FOUND,adUnitCode:e})):t.push({adUnitCode:e,slot:i})}),t},S=(e,o)=>{if(0===e)return o[0];let r=o.find(o=>{let r=Object.keys(o)[0],[t,i]=o[r];return e>t&&e<=i});return r},D=(e,o,r)=>{let t=S(e.floorValue,o.gamBuckets);if(void 0===t)throw r({code:s.ErrorCode.GAM_BUCKET_NOT_FOUND,adUnitCode:e.adUnitCode,payload:{floorWithStatus:e}}),Error("GAM Bucket not found for floorValue "+JSON.stringify(e));let i=Object.keys(t)[0],n=e.status===a.WIN?"_w":e.status===a.FLOORED?"_f":"_n";return i.split("_n")[0]+n};var L=function(e,o,r,t){return new(r||(r=Promise))(function(i,n){function a(e){try{_(t.next(e))}catch(e){n(e)}}function d(e){try{_(t.throw(e))}catch(e){n(e)}}function _(e){var o;e.done?i(e.value):((o=e.value)instanceof r?o:new r(function(e){e(o)})).then(a,d)}_((t=t.apply(e,o||[])).next())})},x=function(e,o){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&0>o.indexOf(t)&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,t=Object.getOwnPropertySymbols(e);i<t.length;i++)0>o.indexOf(t[i])&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(r[t[i]]=e[t[i]]);return r};let P="https://analytics.pbxai.com",M=P+"/errors",h=P+"/events";(t=d||(d={})).PB_GENERIC="PB_GENERIC",t.PB_GAM_GENERIC="PB_GAM_GENERIC",t.PB_GAM_GLOBAL_KVS="PB_GAM_GLOBAL_KVS",t.PB_GAM_CUSTOM_SNIGEL="PB_GAM_CUSTOM_SNIGEL",t.PB_GAM_CUSTOM_INVESTING="PB_GAM_CUSTOM_INVESTING",t.PB_GAM_CUSTOM_INVESTING_FLOORSCONFIG="PB_GAM_CUSTOM_INVESTING_FLOORSCONFIG",t.PB_GAM_CUSTOM_IMPROVEMEDIA="PB_GAM_CUSTOM_IMPROVEMEDIA",t.PB_GAM_CUSTOM_DAILYMOTION="PB_GAM_CUSTOM_DAILYMOTION",t.PB_GAM_CUSTOM_AY="PB_GAM_CUSTOM_AY",t.PB_GAM_CUSTOM_LIVEWRAPPED="PB_GAM_CUSTOM_LIVEWRAPPED",(i=_||(_={})).GPT_SLOT_NOT_FOUND="GPT_SLOT_NOT_FOUND",i.GAM_BUCKET_NOT_FOUND="GAM_BUCKET_NOT_FOUND",i.CALC_FLOOR_NOT_FOUND="CALC_FLOOR_NOT_FOUND",i.MODEL_VERSION_NOT_FOUND_WRITE="MODEL_VERSION_NOT_FOUND_WRITE",i.IMPROVEMEDIA_API_NOT_FOUND="IMPROVEMEDIA_API_NOT_FOUND",i.INVESTING_FILTER_NOT_FOUND="INVESTING_FILTER_NOT_FOUND",i.PUBX_AA_NOT_FOUND="PUBX_AA_NOT_FOUND",i.PRICE_FLOORS_NOT_FOUND="PRICE_FLOORS_NOT_FOUND",i.NON_PUBX_FLOORS_FOUND="NON_PUBX_FLOORS_FOUND",i.CURRENCY_INVALID_INPUT="CURRENCY_INVALID_INPUT",i.CURRENCY_MODULE_NOT_INSTALLED="CURRENCY_MODULE_NOT_INSTALLED",i.ADUNIT_SIZES_NOT_FOUND="ADUNIT_SIZES_NOT_FOUND",i.GET_FLOOR_NOT_FOUND="GET_FLOOR_NOT_FOUND",i.TAG_DEFAULT_VALUES_NOT_FOUND="TAG_DEFAULT_VALUES_NOT_FOUND",i.PUBX_OFF_FLOORS_FOUND="PUBX_OFF_FLOORS_FOUND",i.MODEL_VERSION_NOT_FOUND_READ="MODEL_VERSION_NOT_FOUND_READ",i.PMAC_FLOOR_MULTIPLIER_NOT_FOUND="PMAC_FLOOR_MULTIPLIER_NOT_FOUND",i.PMAC_FLOOR_MULTIPLIER_NOT_FOUND_CONFIG="PMAC_FLOOR_MULTIPLIER_NOT_FOUND_CONFIG",i.INVALID_SCHEMA_FIELDS_FLOORS_RESPONSE="INVALID_SCHEMA_FIELDS_FLOORS_RESPONSE",i.MISSING_ADUNIT_FLOOR_RESPONSE="MISSING_ADUNIT_FLOOR_RESPONSE",i.PMAC_FLOOR_RESPONSE_NOT_AVAILABLE="PMAC_FLOOR_RESPONSE_NOT_AVAILABLE",i.UNCAUGHT_ERROR="UNCAUGHT_ERROR",i.UNCAUGHT_GAM_ERROR="UNCAUGHT_GAM_ERROR",(n=l||(l={})).INFO="INFO",n.WARNING="WARNING",n.ERROR="ERROR",n.FATAL="FATAL";let G={[_.GPT_SLOT_NOT_FOUND]:{message:"GPT Slot not found",severity:l.WARNING},[_.GAM_BUCKET_NOT_FOUND]:{message:"GAM Bucket not found",severity:l.WARNING},[_.CALC_FLOOR_NOT_FOUND]:{message:"floorWithStatus not found",severity:l.FATAL},[_.MODEL_VERSION_NOT_FOUND_WRITE]:{message:"floorModelVersion is undefined but floorsWithStatus is not",severity:l.FATAL},[_.IMPROVEMEDIA_API_NOT_FOUND]:{message:"lwhbim.adServerKeywordsAdUnit is not defined",severity:l.ERROR},[_.INVESTING_FILTER_NOT_FOUND]:{message:"window._imhb_auctions is not defined",severity:l.ERROR},[_.PUBX_AA_NOT_FOUND]:{message:"pubxaiAnalyticsAdapter module is not installed",severity:l.WARNING},[_.PRICE_FLOORS_NOT_FOUND]:{message:"priceFloors module is not installed",severity:l.WARNING},[_.NON_PUBX_FLOORS_FOUND]:{message:"Non-pubx floor provider present",severity:l.WARNING},[_.CURRENCY_INVALID_INPUT]:{message:"Invalid input types for currency conversion",severity:l.WARNING},[_.CURRENCY_MODULE_NOT_INSTALLED]:{message:"currency module of prebid.js is not installed",severity:l.WARNING},[_.ADUNIT_SIZES_NOT_FOUND]:{message:"sizes in adUnit is undefined",severity:l.WARNING},[_.GET_FLOOR_NOT_FOUND]:{message:"calc nbids - None of bidderRequests.bids.getFloor() is defined",severity:l.WARNING},[_.TAG_DEFAULT_VALUES_NOT_FOUND]:{message:"defaultValues of *|banner in config is undefined",severity:l.ERROR},[_.PUBX_OFF_FLOORS_FOUND]:{message:"pubxLoaded is false but has floorData",severity:l.FATAL},[_.MODEL_VERSION_NOT_FOUND_READ]:{message:"floorModelVersion is undefined but adUnit.bids is not",severity:l.FATAL},[_.PMAC_FLOOR_MULTIPLIER_NOT_FOUND]:{message:"PMAC floor multiplier not found in floors-response",severity:l.ERROR},[_.PMAC_FLOOR_MULTIPLIER_NOT_FOUND_CONFIG]:{message:"PMAC floor multiplier not found in config",severity:l.ERROR},[_.INVALID_SCHEMA_FIELDS_FLOORS_RESPONSE]:{message:"Invalid schema fields in floor rules response, expected only ['gptSlot']",severity:l.ERROR},[_.MISSING_ADUNIT_FLOOR_RESPONSE]:{message:"adUnitCode not found in floor rules response",severity:l.ERROR},[_.PMAC_FLOOR_RESPONSE_NOT_AVAILABLE]:{message:"Floors Reponse not available for pmac",severity:l.WARNING},[_.UNCAUGHT_ERROR]:{message:"Uncaught Error",severity:l.ERROR},[_.UNCAUGHT_GAM_ERROR]:{message:"Uncaught GAM Error",severity:l.ERROR}},V=e=>{let{__pubx__:{variant:o,version:r}}=window;return{variant:o,version:r,loadTime:window.__loadTime__,pbVersion:e.pbNamespace.version}},B=e=>({userAgent:navigator.userAgent,host:window.location.host,path:window.location.pathname,pageId:e,doNotTrack:navigator.doNotTrack}),j=(e,o)=>e.pbNamespace.getEvents().filter(e=>"auctionEnd"===e.eventType).findIndex(e=>e.args.auctionId===o),k=e=>e.pbNamespace.getEvents().filter(e=>"auctionInit"===e.eventType).length,W=e=>JSON.parse(JSON.stringify(e)),K=e=>{let{code:o,adUnitCode:r,payload:t}=e,{message:i,severity:n}=G[o];return{code:o,severity:n,message:i,adUnitCode:r,payload:t}},q=(e,o,r,t)=>{let i=W(o);if(e.adUnitCode){let{adUnits:o,bidderRequests:r,bidsReceived:t,bidsRejected:n}=i;i=Object.assign(Object.assign({},i),{adUnits:o.filter(o=>o.code===e.adUnitCode),bidderRequests:r.map(o=>Object.assign(Object.assign({},o),{bids:o.bids.filter(o=>o.adUnitCode===e.adUnitCode)})),bidsReceived:t.filter(o=>o.adUnitCode===e.adUnitCode),bidsRejected:n?n.filter(o=>o.adUnitCode===e.adUnitCode):void 0})}let{auctionId:n,adUnits:a,bidderRequests:d,bidsReceived:_,bidsRejected:l}=i,s={adUnits:a.map(({code:e,sizes:o,bids:r,mediaTypes:t})=>({code:e,mediaTypes:Object.keys(t)})),bidderRequestsCount:d.length,bidsReceived:_.map(({adUnitCode:e,adserverTargeting:o,cpm:r,currency:t,originalCpm:i,originalCurrency:n,floorData:a})=>({adUnitCode:e,adserverTargeting:o?{hb_pb:o.hb_pb}:void 0,cpm:r,currency:t,originalCpm:i,originalCurrency:n,floorData:a?{floorValue:a.floorValue}:void 0})),bidsRejected:l?l.map(({adUnitCode:e,adserverTargeting:o,cpm:r,currency:t,originalCpm:i,originalCurrency:n,floorData:a})=>({adUnitCode:e,adserverTargeting:o?{hb_pb:o.hb_pb}:void 0,cpm:r,currency:t,originalCpm:i,originalCurrency:n,floorData:a?{floorValue:a.floorValue}:void 0})):void 0};return Object.assign({previousAuctionCount:j(r,n),auctionId:n,auctionInfo:s,modelVersion:A(d)},z(e,r,t))},z=(e,o,r)=>({isPubxEnabled:window.__pubxLoaded__,pubxId:o.pubxId,tagInfo:V(o),pageInfo:B(r),errorData:K(e),timesince:Date.now()-window.__loadTimestamp__,timestamp:Date.now()}),H=e=>{let o=e.pbNamespace.getConfig("floors");return o&&o.data&&o.data.floorProvider?o.data.floorProvider:void 0},Y=(e,o,r,t)=>{let{auctionId:i,adUnits:n,bidsReceived:a,bidsRejected:d,bidderRequests:_}=e,l={adUnitCount:n.length,bidCount:a.length+(d?d.length:0),bidders:[...new Set(_.map(({bidderCode:e})=>e))]};return{isPubxEnabled:window.__pubxLoaded__,pubxId:o.pubxId,loadedBeforePb:window.__loadedBeforePb__,tagInfo:V(o),floorProvider:H(o),pageInfo:B(t),missedAuctionCount:r,timesince:Date.now()-window.__loadTimestamp__,timestamp:Date.now(),previousAuctionCount:j(o,i),auctionId:i,auctionInfo:l,modelVersion:A(_),pbBidData:[],gamTargetingData:[]}},X=e=>{let{severity:o}=G[e.code];return!1},J=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let o=16*Math.random()|0;return("x"===e?o:3&o|8).toString(16)}),Z=e=>{let o=[],r=[],t=[],i=k(e),n=J(),a=1/e.samplingRate>Math.random();window.__pubxLogsEnabled__=a;let d=(e,o)=>{if(0===e.length)return;JSON.parse(JSON.stringify(e));let r=new Blob([JSON.stringify(e)],{type:"application/json"});navigator.sendBeacon(o,r),e.splice(0)},_=e=>{if(0===e.length)return 0;let o=new Blob([JSON.stringify(e)]);return o.size},l=()=>!!navigator.sendBeacon&&!!document.visibilityState;l()&&document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&(d(o,M),d(r,M),d(t,h))});let s=window.location.search,u=new URLSearchParams(s);return{debug:(e,...o)=>{u.has("pubx_debug")&&console.info("%cPubx.ai","background-color: #fc6203; color: white; border-radius: 3px; padding: 1px 4px","INFO:",e,...o)},error:(...e)=>{u.has("pubx_debug")&&console.error("%cPubx.ai","background-color: #fc6203; color: white; border-radius: 3px; padding: 1px 4px","ERROR:",...e)},makeRemoteAucError:r=>{let t=W(r),i=(o,r)=>{r.push(q(o,t,e,n)),W(r)};return e=>{if(l()&&(a||X(e))){let r=W(o);i(e,r),_(r)>65536?(d(o,M),i(e,o)):o=r}}},remotePageError:o=>{if(l()&&(a||X(o))){let t=(o,r)=>{r.push(z(o,e,n))},i=W(r);t(o,i),_(i)>65536?(d(r,M),t(o,r)):r=i}},makeRemoteAucEvent:o=>{let r=W(o),s=(o,t)=>{let a=t.find(e=>e.auctionId===r.auctionId);if(void 0===a&&(a=Y(r,e,i,n),t.push(a)),"pbBid"===o.type)a.pbBidData.push(o.data);else if("gamTargeting"===o.type){let e=o.data,r=a.gamTargetingData.find(o=>o.adUnitCode===e.adUnitCode);void 0===r?a.gamTargetingData.push(e):Object.assign(r,e)}W(t)};return e=>{if(l()&&a){let o=W(t);s(e,o),_(o)>65536?(d(t,h),s(e,t)):t=o}}}}},Q=()=>{window.__pubx__.logger.debug("version:",window.__pubx__.variant+"_"+window.__pubx__.version)},$=()=>{window.__loadTime__=window.__loadTimestamp__?Date.now()-window.__loadTimestamp__:-1,window.__loadTimestamp__=Date.now()},ee=(e,o)=>{let r=window.__pubxFloorsConfig__.floors,{auctionDelay:t,endpoint:i,data:n}=r,a=x(r,["auctionDelay","endpoint","data"]);window.__nextfloorsConfig__={floors:Object.assign(Object.assign({},a),{data:e})}},eo=e=>window.__pmacCpmHistory__[e],er=e=>{let o=eo(e);return o?o.history:[]},et=(e,o,r,t)=>{let{debug:i}=window.__pubx__.logger,{__pmacCpmHistory__:n}=window;void 0===n[o]&&(n[o]={history:[],decayRate:void 0});let a={auctionId:e,cpm:r,adUnitStatus:t};er(o).push(a),i("Update Pmac history",o,a)},ei=(e,o,r)=>Math.log(o/(e=0===e?.01:e))/r,en=(e,o,r)=>(e=0===e?.01:e)*Math.exp(o*r),ea=e=>{let{debug:o}=window.__pubx__.logger,r=eo(e),{history:t}=r,[i,n,a]=[t[0].cpm,t[t.length-1].cpm,t.length-1];r.decayRate=ei(i,n,a),o("Update decay rate",e,r.decayRate)},ed=e=>{let o=er(e);if(0===o.length)return!1;if(1===o.length)return!0;let r=o.slice(0,-1).map(e=>e.cpm).reduce((e,o)=>Math.min(e,o)),t=o[o.length-1].cpm;return t<r},e_=(e,o)=>{let{remoteAucError:r}=o,{__pmacCpmHistory__:t}=window,i=Object.keys(t);if(window.__pubx__.variant===d.PB_GAM_CUSTOM_AY)i.forEach(r=>{ed(r)&&eu(r,void 0,eO(r,e),o)});else{let t=v(i,r);t.forEach(({adUnitCode:r,slot:t})=>{ed(r)&&eu(r,t,eO(r,e),o)})}},el=(e,o)=>{let r=Object.keys(o),t=r.find(o=>[e.getAdUnitPath()+"|banner|*",e.getSlotElementId()+"|banner|*"].includes(o));return t},es=(e,o)=>{let r=Object.keys(o),t=r.find(o=>o.split("|banner|*")[0]===eC(e));return t},eu=(e,o,r,t)=>{let i;let{remoteAucError:n}=t,{error:a}=window.__pubx__.logger,{__nextfloorsConfig__:l}=window;if(void 0===l)throw Error("__nextfloorsConfig__ undefined. Skip updating adUnit floors config");let{floors:{data:{values:s}}}=l;if(void 0===(i=window.__pubx__.variant===d.PB_GAM_CUSTOM_AY?es(e,s):el(o,s))){n({code:_.MISSING_ADUNIT_FLOOR_RESPONSE,adUnitCode:e}),a(G[_.MISSING_ADUNIT_FLOOR_RESPONSE].message,{adUnitCode:e});return}s[i]=r},ep=e=>er(e).length<=1,eO=(e,o)=>{let{decayRate:r,history:t}=eo(e),[i,n,d]=[t[0].cpm,t.length,t[t.length-1]];if(ep(e)||d.adUnitStatus===a.NOBIDS)return.01;let _=en(i,r,n),l=_*o;return l<.01?.01:parseFloat(l.toFixed(4))},ec=(e,o)=>L(void 0,void 0,void 0,function*(){let{debug:o}=window.__pubx__.logger,r=yield fetch(e.floorFetchUrl),t=yield r.json();o("Received floor rules",t),ee(t,e)}),ef=(e=null,(o,r,t,i,n,a,l)=>L(void 0,void 0,void 0,function*(){let{remoteAucError:s}=l,{error:u}=window.__pubx__.logger;null===e&&(e=ec(n,l)),yield e,et(o,r,t,i),ep(r)||ea(r);let{__nextfloorsConfig__:p,__pubxLoaded__:c}=window;if(void 0===p)throw s({code:_.PMAC_FLOOR_RESPONSE_NOT_AVAILABLE,adUnitCode:r}),u(G[_.PMAC_FLOOR_RESPONSE_NOT_AVAILABLE].message,{adUnitCode:r}),Error("__nextfloorsConfig__ undefined. Skip updating floors config");window.__pubx__.variant===d.PB_GAM_CUSTOM_AY?(e_(a,l),O(c,n,e=>p)):googletag.cmd.push(()=>{try{e_(a,l),O(c,n,e=>p)}catch(e){u(e),l.remoteAucError({code:_.UNCAUGHT_GAM_ERROR,payload:{name:e.name,message:e.message}})}})})),eN=(e,o)=>{window.__pubxFloors__={},window.__pubxLoaded__=eg(e.splitRate),window.__loadedBeforePb__=void 0===e.pbNamespace.version,window.__pmacCpmHistory__={},$(),window.__pubx__={variant:o,version:"1711104055359"},e.pbNamespace.que.push(function(){window.__pubx__.logger=Z(e),Q()})},eg=e=>void 0!==window.__pubxLoaded__?window.__pubxLoaded__:e>100*Math.random(),eb=e=>e.bids.some(({floorData:e})=>e&&e.floorProvider===u&&e.skipped),em=e=>e.bids.some(({floorData:e})=>e&&e.floorProvider===u&&e.modelVersion),eE=(e,o,r)=>{if("object"!=typeof e||0===o.length){window.__pubx__.logger.error("setObjectValueFromKeyPath: invalid arguments",{object:e,keyPath:o,value:r});return}let t=o.length-1;for(let r=0;r<t;++r){let t=o[r];t in e||(e[t]={}),e=e[t]}e[o[t]]=r},eR=(e,o)=>e+"-"+o,eU=(e,o)=>{let r=eb(e);return r?o.pubxOptimizedOffValue:o.pubxOptimizedOnValue},eA=(e,o)=>{let r=em(e);return r?o.pubxSplitOnValue:o.pubxSplitOffValue},eI=(e,o,r,t,i)=>{let{remoteAucEvent:n}=i;eE(window.__pubxFloors__,[e,o,r],t),window.__pubx__.logger.debug("Setting KVs in Global",{auctionId:e,adUnitCode:o,key:r,value:t}),n({type:"gamTargeting",data:{adUnitCode:o,[r]:t}})},eF=(e,o,r,t)=>{let{remoteAucError:i,remoteAucEvent:n}=t,{auctionId:a,adUnits:d}=r;d.filter(o=>C(o,e,i)).forEach(e=>{let r=eA(e,o);if(eI(a,e.code,o.pubxSplitKey,r,t),r===o.pubxSplitOnValue){let r=eU(e,o);eI(a,e.code,o.pubxOptimizedKey,r,t)}})},eT=(e,o,r,t,i)=>{let{remoteAucError:n}=i;e.forEach(e=>{let{adUnitCode:a}=e,d=D(e,t,n);if(eI(r,a,t.pubxFloorKey,d,i),void 0===o)throw n({code:_.MODEL_VERSION_NOT_FOUND_WRITE,adUnitCode:a,payload:{floorWithStatus:e}}),Error("floorModelVersion is undefined but floorsWithStatus is not");let l=I(o);if(l){eI(r,a,t.pubxMvKey,l,i);let e=eR(d,l);eI(r,a,t.pubxFloorMvKey,e,i)}})},eC=e=>e.split("__ayManagerEnv__")[0],ey=(()=>{window.googletag=window.googletag||{};window.googletag.cmd=window.googletag.cmd||[];window.pbjs=window.pbjs||{};window.pbjs.que=window.pbjs.que||[];return{splitRate:95,samplingRate:370,pbNamespace:pbjs,currency:"EUR",modelVersion:"cb_AB_z_dt_0.75_dwt_1.0_dnt_0.1_fm_0.5",auctionDelay:100,pubxId:"315b44bc-10e5-45a8-8f58-064d6e7317c0",schema:['gptSlot','mediaType'],defaultValues:{'*|banner':0.01},floorFetchUrl:"https://floor.pbxai.com/?pubxId=315b44bc-10e5-45a8-8f58-064d6e7317c0&page="+window.location.href,floorMin:null,hbPbKey:"hb_pb",pubxSplitKey:"pubx-a",pubxSplitOnValue:"on",pubxSplitOffValue:"off",pubxOptimizedKey:"pubx-op",pubxOptimizedOnValue:"on",pubxOptimizedOffValue:"off",pubxMvKey:"pubx-m_v",pubxFloorKey:"pubx-floor",pubxFloorMvKey:"pubx-floor-mv",flooredBidMultiplier:0.75,noBidMultiplier:0.1,winBidMultiplier:1.0,pmacFloorMultiplier:0.5,gamBuckets:[{'pbx_a0d_n':[0,0.03]},{'pbx_a1d_n':[0.03,0.06]},{'pbx_a2d_n':[0.06,0.09]},{'pbx_a3d_n':[0.09,0.12]},{'pbx_a4d_n':[0.12,0.15]},{'pbx_b0d_n':[0.15,0.2]},{'pbx_b1d_n':[0.2,0.25]},{'pbx_b2d_n':[0.25,0.3]},{'pbx_b3d_n':[0.3,0.35]},{'pbx_b4d_n':[0.35,0.4]},{'pbx_b5d_n':[0.4,0.45]},{'pbx_b6d_n':[0.45,0.5]},{'pbx_b7d_n':[0.5,0.55]},{'pbx_b8d_n':[0.55,0.6]},{'pbx_b9d_n':[0.6,0.65]},{'pbx_b10d_n':[0.65,0.7]},{'pbx_b11d_n':[0.7,0.75]},{'pbx_b12d_n':[0.75,0.8]},{'pbx_b13d_n':[0.8,0.85]},{'pbx_b14d_n':[0.85,0.9]},{'pbx_b15d_n':[0.9,0.95]},{'pbx_b16d_n':[0.95,1]},{'pbx_c0d_n':[1,1.1]},{'pbx_c1d_n':[1.1,1.2]},{'pbx_c2d_n':[1.2,1.3]},{'pbx_c3d_n':[1.3,1.4]},{'pbx_c4d_n':[1.4,1.5]},{'pbx_c5d_n':[1.5,1.6]},{'pbx_c6d_n':[1.6,1.7]},{'pbx_c7d_n':[1.7,1.8]},{'pbx_c8d_n':[1.8,1.9]},{'pbx_c9d_n':[1.9,2]},{'pbx_d0d_n':[2,2.25]},{'pbx_d1d_n':[2.25,2.5]},{'pbx_d2d_n':[2.5,2.75]},{'pbx_d3d_n':[2.75,3]},{'pbx_d4d_n':[3,3.25]},{'pbx_d5d_n':[3.25,3.5]},{'pbx_d6d_n':[3.5,3.75]},{'pbx_d7d_n':[3.75,4]},{'pbx_d8d_n':[4,4.25]},{'pbx_d9d_n':[4.25,4.5]},{'pbx_d10d_n':[4.5,4.75]},{'pbx_d11d_n':[4.75,5]},{'pbx_d12d_n':[5,111111]}]};})();(0,s.initPubxGlobals)(ey,s.Template.PB_GAM_GLOBAL_KVS);let ew=window.__pubxLoaded__;(e=>{e.pbNamespace.que.push(function(){let{debug:o,error:r,remotePageError:t}=window.__pubx__.logger;if(!e.pbNamespace.installedModules.includes("pubxaiAnalyticsAdapter")){r("pubxaiAnalyticsAdapter module is not installed"),t({code:s.ErrorCode.PUBX_AA_NOT_FOUND});return}{let r=p(e);e.pbNamespace.enableAnalytics(r),o("Enabling Analytics",r)}})})(ey),O(ew,ey,e=>{let o={floors:{enforcement:{floorDeals:!0},auctionDelay:e.auctionDelay,endpoint:{url:e.floorFetchUrl},data:{floorProvider:u,modelVersion:e.modelVersion,currency:e.currency,schema:{fields:e.schema},values:e.defaultValues}}};return e.floorMin&&(o.floors.floorMin=e.floorMin),o}),((e,o,r,t,i)=>{o.pbNamespace.que.push(function(){o.pbNamespace.onEvent("auctionEnd",n=>{try{let{makeRemoteAucError:a,makeRemoteAucEvent:d,error:_}=window.__pubx__.logger,l={remoteAucError:a(n),remoteAucEvent:d(n)};try{i&&(n=i(n,l)),r(e,o,n,l);let a=A(n.bidderRequests),d=w(e,n,a,o,l);t(d,a,n.auctionId,o,l)}catch(e){_(e),l.remoteAucError({code:s.ErrorCode.UNCAUGHT_ERROR,payload:{name:e.name,message:e.message}})}}catch(e){window.__pubx__.logger.error(e)}})})})(ew,ey,s.setSplitKeyGlobal,s.setFloorsAndMvInGlobal)})();